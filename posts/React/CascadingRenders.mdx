---
title: Cascading Renders
description: Reactì˜ Cascading Rendersì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.
tags:
  - React
createdAt: 2026-01-26
thumbnail: /thumbnails/react.svg
draft: false
---

## ì„œë¡ 

ìµœê·¼ React ê¸°ë°˜ì—ì„œ ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ìì£¼ ë³´ì´ëŠ” ë¬¸êµ¬ê°€ ìˆë‹¤.

> Error: Calling setState synchronously within an effect can trigger cascading renders. 

"ì•„ë‹ˆ, `useEffect`ì—ì„œ state ì¢€ ì—…ë°ì´íŠ¸í•˜ê² ë‹¤ëŠ”ë° ì™œ ê·¸ë˜? ì˜ˆì „ì—” ì˜ë§Œ ëì–ì•„?"

ì£¼ë¡œ `useEffect` ë‚´ë¶€ì—ì„œ `setState` ë¥¼ í˜¸ì¶œí•˜ëŠ” ìƒí™©ì—ì„œ ì¶œë ¥ë˜ëŠ” ë¬¸êµ¬ì´ë‹¤. ê¸°ì¡´ì— ìì£¼ ì‚¬ìš©ë˜ë˜ ì´ íŒ¨í„´ì— ë¬´ìŠ¨ ë¬¸ì œê°€ ìˆê¸¸ë˜ React 18, ê·¸ë¦¬ê³  ë‹¤ê°€ì˜¬ React 19ì—ì„œ ì´ íŒ¨í„´ì€ 'ì•ˆí‹° íŒ¨í„´'ìœ¼ë¡œ ê·œì •í•˜ê²Œ ëœ ê±¸ê¹Œ?

## Cascading Renders

ê²½ê³ ì˜ í•µì‹¬ì€ **ë¹„íš¨ìœ¨ì ì¸ ë Œë”ë§ íë¦„** ì— ìˆë‹¤. 

`useEffect`ë‚´ë¶€ì—ì„œ `setState`ë¥¼ í˜¸ì¶œí•˜ë©´ ì–´ë–¤ ì¼ì´ ë²Œì–´ì§ˆê¹Œ?

1. Render 1: ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ëœë‹¤. (Virtual DOM ìƒì„±)
2. Browser Paint : ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ê·¸ë¦°ë‹¤.
3. Effect ì‹¤í–‰ : `useEffect`ê°€ ì‹¤í–‰ëœë‹¤.
4. setState í˜¸ì¶œ : Effect ë‚´ë¶€ì˜ `setState`ê°€ í˜¸ì¶œë˜ì–´ ìƒíƒœê°€ ë³€ê²½ëœë‹¤.
5. Render 2 : ìƒíƒœê°€ ë³€í–ˆìœ¼ë‹ˆ ReactëŠ” ì¦‰ì‹œ ë‹¤ì‹œ ë Œë”ë§ì„ ì‹œì‘í•œë‹¤.
6. Browser Paint : ë¸Œë¼ìš°ì €ê°€ ë³€ê²½ëœ í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦°ë‹¤.

ë¬¸ì œëŠ” ì‚¬ìš©ìê°€ **Render 1**ì˜ ê²°ê³¼ë¥¼ ë³¼ ìƒˆë„ ì—†ì´ **Render 2**ê°€ ë®ì–´ì”Œì›Œì§„ë‹¤ëŠ” ì ì´ë‹¤. ReactëŠ” ë Œë”ë§ì„ ë‘ ë²ˆ ê³„ì‚°í–ˆì§€ë§Œ, ì‚¬ìš©ìëŠ” ê²°ê³¼ì ìœ¼ë¡œ í•œ ë²ˆì˜ í™”ë©´ë§Œ ë³´ê²Œ ëœë‹¤. **ì´ê²ƒì´ 'Cascading Renders'ì´ë©°,** ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ë¼ëŠ” ê²ƒì´ë‹¤.


## ê·¼ë° ì™œ ì§€ê¸ˆ ì´ìŠˆê°€ ëœ ê±°ì§€?

React 18 ì—ì„œ **Concurrent Mode**ê°€ ë„ì…ë˜ë©´ì„œ ì´ ë¬¸ì œì˜ ì¤‘ìš”ì„±ì´ ë†’ì•„ì¡Œë‹¤. ReactëŠ” ì´ì œ ë Œë”ë§ì„ ì¤‘ê°„ì— ë©ˆì¶”ê±°ë‚˜, ìš°ì„ ìˆœìœ„ë¥¼ ë¯¸ë£¨ê±°ë‚˜ í•˜ëŠ” ë³µì¡í•œ ìŠ¤ì¼€ì¤„ë§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ëœ ê²ƒì´ë‹¤.

ì´ëŸ° ìƒí™©ì—ì„œ `useEffect` ë‚´ì˜ ë™ê¸°ì ì¸ `setState`ëŠ” Reactì˜ ë Œë”ë§ íŒŒì´í”„ë¼ì¸ì„ ë°©í•´í•˜ê³ , ì˜ˆì¸¡ë¶ˆê°€ëŠ¥í•œ UI ë¸”ë¡œí‚¹ì„ ìœ ë°œí•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ React íŒ€ì€ **ë Œë”ë§ ì¤‘ì— ê²°ì •í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë Œë”ë§ ì¤‘ì— ëë‚´ë¼**ë¼ê³  ê°€ì´ë“œë¼ì¸ì„ ê°•í™”í•˜ê³  ìˆëŠ”ê²ƒì´ë‹¤.


## ëŒ€í‘œì ì¸ ì•ˆí‹° íŒ¨í„´ê³¼ í•´ê²°ì±…

ê°€ì¥ í”í•˜ê²Œ ë°œìƒí•˜ëŠ” ì•ˆí‹° íŒ¨í„´ì— ëŒ€í•´ ì•Œì•„ë³´ìë©´,

### Case 1: Propsì— ë”°ë¼ Stateë¥¼ ë³€ê²½

`props`ë¡œ ë°›ì€ ë°ì´í„°ê°€ ë°”ë€” ë•Œë§ˆë‹¤ ë‚´ë¶€ `state`ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²½ìš°ì´ë‹¤.

**âŒ ì•ˆí‹° íŒ¨í„´ (Don't)**

``` TypeScript
function UserProfile({ user }) {
  const [fullName, setFullName] = useState('');

  // ğŸ˜± ë Œë”ë§ -> Effect -> setState -> ì¬ë Œë”ë§ ë°œìƒ!
  useEffect(() => {
    setFullName(`${user.firstName} ${user.lastName}`);
  }, [user]);

  return <div>{fullName}</div>;
}
```

**âœ… í•´ê²°ì±…: ë Œë”ë§ ì¤‘ì— ê³„ì‚°í•˜ê¸° (Derive State)** ìƒíƒœë¡œ ì €ì¥í•  í•„ìš”ê°€ ì—†ë‹¤. ë Œë”ë§ ì¤‘ì— ê³„ì‚°í•˜ê³ , ê°’ì´ ë¹„ì‹¸ë‹¤ë©´ `useMemo`ë¥¼ ì“°ë©´ ëœë‹¤.

```TypeScript
function UserProfile({ user }) {
  // ğŸ˜ ë Œë”ë§ ì¤‘ì— ì¦‰ì‹œ ê³„ì‚°ë¨. ì¶”ê°€ ë Œë”ë§ ì—†ìŒ.
  const fullName = `${user.firstName} ${user.lastName}`; 

  return <div>{fullName}</div>;
}
```

### Case 2: Propsê°€ ë³€í•˜ë©´ Stateë¥¼ ì´ˆê¸°í™”í•´ì•¼ í•  ë•Œ

ì˜ˆë¥¼ ë“¤ì–´, ì„ íƒëœ `userId`ê°€ ë°”ë€Œë©´ ì‘ì„± ì¤‘ì´ë˜ `comment`ë¥¼ ì´ˆê¸°í™”í•´ì•¼ í•˜ëŠ” ê²½ìš°ì´ë‹¤.

**âŒ ì•ˆí‹° íŒ¨í„´ (Don't)**

```TypeScript
function CommentBox({ userId }) {
  const [comment, setComment] = useState('');

  // ğŸ˜± userIdê°€ ë°”ë€” ë•Œë§ˆë‹¤ ì¬ë Œë”ë§ ìœ ë°œ
  useEffect(() => {
    setComment('');
  }, [userId]);

  return <input value={comment} onChange={e => setComment(e.target.value)} />;
}
```

**âœ… í•´ê²°ì±…: Keyë¥¼ ì´ìš©í•´ ì»´í¬ë„ŒíŠ¸ ë‹¤ì‹œ ë§Œë“¤ê¸°** ì´ê±´ Reactì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤. ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ `key` ê°’ì„ ë³€ê²½í•˜ë©´ ReactëŠ” í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¥¼ **ì™„ì „íˆ ì´ˆê¸°í™”**í•˜ê³  ìƒˆë¡œ ê·¸ë¦°ë‹¤.

```TypeScript
// ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸
function PostPage({ userId }) {
  return (
    <>
      <Profile userId={userId} />
      {/* ğŸ˜ userIdê°€ ë°”ë€Œë©´ CommentBoxëŠ” ìë™ìœ¼ë¡œ ì´ˆê¸°í™”ë¨ */}
      <CommentBox key={userId} userId={userId} />
    </>
  );
}
```

### Case 3: ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ê²Œ ë°ì´í„° ì „ë‹¬í•˜ê¸°

ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°ì´í„°ê°€ ë¡œë“œë˜ê±°ë‚˜ ë³€ê²½ë˜ì—ˆì„ ë•Œ, ë¶€ëª¨ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ê³  `useEffect`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°.

**âŒ ì•ˆí‹° íŒ¨í„´ (Don't)**

```TypeScript
function Child({ onLoaded }) {
  useEffect(() => {
    const data = performCalculations();
    onLoaded(data); // ğŸ˜± ë¶€ëª¨ì˜ setStateë¥¼ ìœ ë°œ -> ë¶€ëª¨ ì¬ë Œë”ë§ -> ìì‹ ì¬ë Œë”ë§
  }, [onLoaded]);
  
  return <div>Child</div>;
}
```

**âœ… í•´ê²°ì±…: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬í•˜ê±°ë‚˜ ìƒíƒœ ëŒì–´ì˜¬ë¦¬ê¸°** ê°€ëŠ¥í•˜ë©´ ë Œë”ë§ íë¦„ì´ ì•„ë‹ˆë¼, **ì‚¬ìš©ì ì´ë²¤íŠ¸(í´ë¦­, ì…ë ¥ ë“±)** ê°€ ë°œìƒí–ˆì„ ë•Œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ë¡œì§ì„ ì´ë™ì‹œì¼œì•¼ í•©ë‹ˆë‹¤. í˜¹ì€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ ìì²´ë¥¼ ë¶€ëª¨ë¡œ ì˜®ê²¨ì•¼ í•©ë‹ˆë‹¤.


## ê²°ë¡  

> EffectëŠ” 'ë™ê¸°í™”'ë¥¼ ìœ„í•œ ê³³ì´ë‹¤

`useEffect`ì˜ ì´ë¦„ì´ ì™œ `useChangeState`ê°€ ì•„ë‹ˆë¼ `useEffect`ì¸ì§€ ìƒê°í•´ ë³¼ ë•Œì´ë‹¤. `useEffect`ëŠ” ì–´ë””ê¹Œì§€ë‚˜ `Side Effect`ë¥¼ ìœ„í•œ í›…ì´ë‹¤.

ë•Œë¬¸ì—

- **DOM ë³€ê²½ (íƒ€ì´í‹€ ë³€ê²½ ë“±)**
- **êµ¬ë… (ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ)**
- **ë„¤íŠ¸ì›Œí¬ ìš”ì²­**
    

ì´ëŸ° ì™¸ë¶€ì ì¸ ìš”ì¸ì´ ì•„ë‹ˆë¼ë©´, **ë‹¨ìˆœí•œ ë°ì´í„° íë¦„ ì œì–´ë¥¼ ìœ„í•´ `useEffect`ë¥¼ ì“°ëŠ” ê²ƒì€ ë©ˆì¶°ì•¼ í•œë‹¤.**

ì½”ë“œë¥¼ ì§¤ ë•Œ `useEffect` ì•ˆì—ì„œ `setState`ë¥¼ ì“°ê³  ì‹¶ë‹¤ë©´ ë”± í•œ ë²ˆë§Œ ë” ìƒê°í•´ë³´ì.

> "ì´ê±°... ê·¸ëƒ¥ ë Œë”ë§ ì¤‘ì— ë³€ìˆ˜ë¡œ ì„ ì–¸í•´ë„ ë˜ëŠ” ê±° ì•„ë‹ˆì•¼?"

ì•„ë§ˆ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ë‹µì€ **YES** ì¼ ê²ƒì´ë‹¤.


## ì¶œì²˜

[https://react.dev/learn/you-might-not-need-an-effect](https://react.dev/learn/you-might-not-need-an-effect)
[How Upgrade to React 18](https://react.dev/blog/2022/03/08/react-18-upgrade-guide)